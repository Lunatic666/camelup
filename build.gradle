apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'application'

mainClassName = "net.wolframite.camelskeleton.Start"

sourceSets {
	main {
		groovy    { srcDir 'src/main/groovy' }
		resources { srcDir 'src/main/resources' }
	}
}

repositories {
	jcenter()
	mavenCentral()
}

dependencies {
	compile 'log4j:log4j:1.2.17'
	compile 'commons-io:commons-io:2.4'
	compile 'org.slf4j:slf4j-api:1.7.10'
	compile 'org.slf4j:slf4j-log4j12:1.7.10'
	compile 'commons-codec:commons-codec:1.10'
	compile 'org.apache.httpcomponents:httpmime:4.5'

	compile 'org.apache.camel:camel-jmx:2.15.2'
	compile 'org.apache.camel:camel-ftp:2.15.2'
	compile 'org.apache.camel:camel-core:2.15.2'
	compile 'org.apache.camel:camel-test:2.15.2'
	compile 'org.apache.camel:camel-jdbc:2.15.2'
	compile 'org.apache.camel:camel-http4:2.15.2'
	compile 'org.apache.camel:camel-jetty:2.15.2'
	compile 'org.apache.camel:camel-spring:2.15.2'
	compile 'org.apache.camel:camel-stream:2.15.2'
	compile 'org.apache.camel:camel-jackson:2.15.2'
	compile 'org.apache.camel:camel-beanstalk:2.15.2'
	compile 'org.apache.camel:camel-netty4-http:2.15.2'

	compile 'org.codehaus.groovy:groovy-all:2.4.4'
}

run {
	systemProperties = System.getProperties()
}

task fatJar(type: Jar) {
	manifest {
		attributes 'Application-Name': 'CamelUp',
			'Main-Class': 'net.wolframite.camelskeleton.Start',
			'Created-By': 'Wolfram Huesken <woh@wolframite.net>'
	}

	baseName = project.name

	doFirst {
		from {
			configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
		}
		// exclude 'META-INF/*.DSA', 'META-INF/*.SF', 'META-INF/*.RSA'
	}
	with jar
}
